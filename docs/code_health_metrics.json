{
  "summary": {
    "overall_score": 89,
    "last_updated": "2026-02-27T01:54:00Z",
    "generated_by": "Codex"
  },
  "thresholds": {
    "overall_score_drop_max": 3,
    "solid_compliance_drop_max": 2,
    "smells_growth_percent_max": 10,
    "complexity_growth_percent_max": 10
  },
  "metrics": {
    "files_total": 172,
    "source_files_total": 172,
    "lines_total": 16873,
    "frontend": {
      "files": 155,
      "lines": 13990
    },
    "backend": {
      "files": 17,
      "lines": 2883
    },
    "tests": {
      "files": 38,
      "lines": 2888,
      "test_file_ratio_vs_source_percent": 22.1,
      "source_files_with_direct_test_match_percent": 29.7,
      "coverage_estimate_percent": 73,
      "coverage_band": "medium"
    },
    "smells": {
      "long_files_over_500_loc": 1,
      "long_files_over_300_loc": 4,
      "long_functions_over_50_loc": 18,
      "duplicate_code_blocks_estimate": 6,
      "solid_violations_estimate": 7,
      "smells_per_1k_loc": 1.94
    },
    "risk_modules": [
      {
        "path": "frontend/src/pages/GamePage.tsx",
        "risk": "medium",
        "reason": "Main gameplay orchestrator remains large, but special-flow branching reduced and movement timing is now centralized."
      },
      {
        "path": "frontend/src/components/lila/LilaBoardCanvas.tsx",
        "risk": "medium",
        "reason": "Camera follow, token/path sync, pointer hit mapping and adaptive board asset loading remain concentrated in a single component."
      },
      {
        "path": "frontend/src/features/telegram/ui/TelegramAppShell.tsx",
        "risk": "low",
        "reason": "Route-aware Telegram controls, auth-state messaging, and fullscreen affordances are centralized but still coupled in one shell component."
      },
      {
        "path": "frontend/src/theme/BoardThemeProvider.tsx",
        "risk": "low",
        "reason": "Coordinates persisted visual preferences and derived theme overrides with clear context boundary."
      },
      {
        "path": "frontend/src/context/GameContext.tsx",
        "risk": "low",
        "reason": "Thin provider wrapper around reducer/actions with repository abstraction boundary preserved."
      },
      {
        "path": "frontend/src/features/telegram/ui/useTelegramSessionSync.ts",
        "risk": "low",
        "reason": "Session bootstrap now hydrates from server and then performs outbound sync; ordering is guarded but async orchestration remains sensitive."
      },
      {
        "path": "backend/src/store/roomsStore.ts",
        "risk": "medium",
        "reason": "Room lifecycle, turn logic, card state, note persistence, player preferences, and Postgres fallback behavior are concentrated in one file and should eventually be split into repository + domain service."
      },
      {
        "path": "frontend/src/features/telegram/rooms/TelegramRoomsContext.tsx",
        "risk": "medium",
        "reason": "Context now owns room loading, socket lifecycle, host commands, note/card actions, and player preference sync; this should be reduced into smaller hooks/services."
      },
      {
        "path": "frontend/src/features/telegram/rooms/HostRoomPage.tsx",
        "risk": "medium",
        "reason": "Desktop host console, shared board composition, modal permissions, and token color controls are currently assembled in one page-level component."
      },
      {
        "path": "backend/src/store/gamesStore.ts",
        "risk": "medium",
        "reason": "Session upsert/patch logic now spans payload normalization, throw counting, and Postgres persistence concerns in one unit."
      },
      {
        "path": "backend/src/lib/db.ts",
        "risk": "low",
        "reason": "Migration runner and pool lifecycle are centralized here; small but foundational for all future persistence-dependent features including RAG."
      },
      {
        "path": "backend/src/routes/auth.ts",
        "risk": "medium",
        "reason": "Telegram validation, scoped token issuance, admin upgrade, and chat-bound capability serialization now intersect in one route module."
      },
      {
        "path": "backend/src/store/usersStore.ts",
        "risk": "medium",
        "reason": "User persistence now also manages admin chat bindings and role promotion, which should eventually move into a dedicated auth/admin service."
      }
    ]
  },
  "scores": {
    "architecture_clarity": 91,
    "solid_compliance": 88,
    "test_coverage": 72,
    "complexity": 80,
    "consistency": 89
  },
  "methods": {
    "loc": "wc -l over frontend/src + backend/src ts/tsx/js/jsx",
    "test_inventory": "glob for *.test.* and *.spec.* in frontend/src + backend/test",
    "long_file_thresholds": [
      300,
      500
    ],
    "long_function_threshold": 50,
    "duplicate_detection": "normalized 6-line sliding window estimate"
  }
}
